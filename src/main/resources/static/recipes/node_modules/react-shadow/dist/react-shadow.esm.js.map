{"version":3,"file":"react-shadow.esm.js","sources":["../node_modules/@babel/runtime/helpers/extends.js","../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/nonIterableRest.js","../node_modules/@babel/runtime/helpers/slicedToArray.js","../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","../node_modules/@babel/runtime/helpers/objectWithoutProperties.js","../node_modules/humps/humps.js","../src/index.js","../node_modules/react-use/esm/useEnsuredForwardedRef.js"],"sourcesContent":["function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;","// =========\n// = humps =\n// =========\n// Underscore-to-camelCase converter (and vice versa)\n// for strings and object keys\n\n// humps is copyright Â© 2012+ Dom Christie\n// Released under the MIT license.\n\n\n;(function(global) {\n\n  var _processKeys = function(convert, obj, options) {\n    if(!_isObject(obj) || _isDate(obj) || _isRegExp(obj) || _isBoolean(obj) || _isFunction(obj)) {\n      return obj;\n    }\n\n    var output,\n        i = 0,\n        l = 0;\n\n    if(_isArray(obj)) {\n      output = [];\n      for(l=obj.length; i<l; i++) {\n        output.push(_processKeys(convert, obj[i], options));\n      }\n    }\n    else {\n      output = {};\n      for(var key in obj) {\n        if(Object.prototype.hasOwnProperty.call(obj, key)) {\n          output[convert(key, options)] = _processKeys(convert, obj[key], options);\n        }\n      }\n    }\n    return output;\n  };\n\n  // String conversion methods\n\n  var separateWords = function(string, options) {\n    options = options || {};\n    var separator = options.separator || '_';\n    var split = options.split || /(?=[A-Z])/;\n\n    return string.split(split).join(separator);\n  };\n\n  var camelize = function(string) {\n    if (_isNumerical(string)) {\n      return string;\n    }\n    string = string.replace(/[\\-_\\s]+(.)?/g, function(match, chr) {\n      return chr ? chr.toUpperCase() : '';\n    });\n    // Ensure 1st char is always lowercase\n    return string.substr(0, 1).toLowerCase() + string.substr(1);\n  };\n\n  var pascalize = function(string) {\n    var camelized = camelize(string);\n    // Ensure 1st char is always uppercase\n    return camelized.substr(0, 1).toUpperCase() + camelized.substr(1);\n  };\n\n  var decamelize = function(string, options) {\n    return separateWords(string, options).toLowerCase();\n  };\n\n  // Utilities\n  // Taken from Underscore.js\n\n  var toString = Object.prototype.toString;\n\n  var _isFunction = function(obj) {\n    return typeof(obj) === 'function';\n  };\n  var _isObject = function(obj) {\n    return obj === Object(obj);\n  };\n  var _isArray = function(obj) {\n    return toString.call(obj) == '[object Array]';\n  };\n  var _isDate = function(obj) {\n    return toString.call(obj) == '[object Date]';\n  };\n  var _isRegExp = function(obj) {\n    return toString.call(obj) == '[object RegExp]';\n  };\n  var _isBoolean = function(obj) {\n    return toString.call(obj) == '[object Boolean]';\n  };\n\n  // Performant way to determine if obj coerces to a number\n  var _isNumerical = function(obj) {\n    obj = obj - 0;\n    return obj === obj;\n  };\n\n  // Sets up function which handles processing keys\n  // allowing the convert function to be modified by a callback\n  var _processor = function(convert, options) {\n    var callback = options && 'process' in options ? options.process : options;\n\n    if(typeof(callback) !== 'function') {\n      return convert;\n    }\n\n    return function(string, options) {\n      return callback(string, convert, options);\n    }\n  };\n\n  var humps = {\n    camelize: camelize,\n    decamelize: decamelize,\n    pascalize: pascalize,\n    depascalize: decamelize,\n    camelizeKeys: function(object, options) {\n      return _processKeys(_processor(camelize, options), object);\n    },\n    decamelizeKeys: function(object, options) {\n      return _processKeys(_processor(decamelize, options), object, options);\n    },\n    pascalizeKeys: function(object, options) {\n      return _processKeys(_processor(pascalize, options), object);\n    },\n    depascalizeKeys: function () {\n      return this.decamelizeKeys.apply(this, arguments);\n    }\n  };\n\n  if (typeof define === 'function' && define.amd) {\n    define(humps);\n  } else if (typeof module !== 'undefined' && module.exports) {\n    module.exports = humps;\n  } else {\n    global.humps = humps;\n  }\n\n})(this);\n","import React, {\n    useState,\n    useEffect,\n    forwardRef,\n    createContext,\n    useContext,\n} from 'react';\nimport { useEnsuredForwardedRef } from 'react-use';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { decamelize } from 'humps';\n\nconst ShadowRootContext = createContext(null);\n\n/**\n * Allows clients to use the shadow-root\n */\nexport function useShadowRoot() {\n    return useContext(ShadowRootContext);\n}\n\nfunction Noop({ children }) {\n    return children;\n}\n\nfunction getStyleWrapper() {\n    try {\n        const styled = require('styled-components');\n        if (!('StyleSheetManager' in styled))\n            throw new Error(\n                '`StyleSheetManager` not found in `styled-components` library.',\n            );\n        return styled.StyleSheetManager;\n    } catch {\n        return Noop;\n    }\n}\n\nfunction ShadowContent({ root, children }) {\n    return createPortal(children, root);\n}\n\nShadowContent.propTypes = {\n    root: PropTypes.object.isRequired,\n    children: PropTypes.node,\n};\n\nShadowContent.defaultProps = { children: null };\n\nconst tags = new Map();\n\nfunction createTag(options) {\n    const ShadowRoot = forwardRef(\n        ({ mode, delegatesFocus, styleSheets, children, ...props }, ref) => {\n            const node = useEnsuredForwardedRef(ref);\n            const [root, setRoot] = useState(null);\n\n            const Wrapper = getStyleWrapper();\n            const key = `node_${mode}${delegatesFocus}`;\n\n            useEffect(() => {\n                if (node.current) {\n                    try {\n                        typeof ref === 'function' && ref(node.current);\n\n                        const root = node.current.attachShadow({\n                            mode,\n                            delegatesFocus,\n                        });\n                        styleSheets.length > 0 &&\n                            (root.adoptedStyleSheets = styleSheets);\n\n                        setRoot(root);\n                    } catch (error) {\n                        switch (error.name) {\n                            case 'NotSupportedError':\n                                styleSheets.length > 0 &&\n                                    (root.adoptedStyleSheets = styleSheets);\n                                break;\n                            default:\n                                throw error;\n                        }\n                    }\n                }\n            }, [ref, node, styleSheets]);\n\n            return (\n                <options.tag key={key} ref={node} {...props}>\n                    {root && (\n                        <ShadowRootContext.Provider value={root}>\n                            <Wrapper target={root}>\n                                <ShadowContent root={root}>\n                                    {children}\n                                </ShadowContent>\n                            </Wrapper>\n                        </ShadowRootContext.Provider>\n                    )}\n                </options.tag>\n            );\n        },\n    );\n\n    ShadowRoot.propTypes = {\n        mode: PropTypes.oneOf(['open', 'closed']),\n        delegatesFocus: PropTypes.bool,\n        styleSheets: PropTypes.arrayOf(\n            PropTypes.instanceOf(global.CSSStyleSheet),\n        ),\n        children: PropTypes.node,\n    };\n\n    ShadowRoot.defaultProps = {\n        mode: 'open',\n        delegatesFocus: false,\n        styleSheets: [],\n        children: null,\n    };\n\n    return ShadowRoot;\n}\n\nexport function createProxy(target = {}) {\n    return new Proxy(target, {\n        get: function get(_, name) {\n            const tag = decamelize(name, { separator: '-' });\n            if (!tags.has(tag)) tags.set(tag, createTag({ tag }));\n            return tags.get(tag);\n        },\n    });\n}\n\nexport default createProxy();\n","import { forwardRef, useRef, useEffect, } from 'react';\nexport default function useEnsuredForwardedRef(forwardedRef) {\n    var ensuredRef = useRef(forwardedRef && forwardedRef.current);\n    useEffect(function () {\n        if (!forwardedRef) {\n            return;\n        }\n        forwardedRef.current = ensuredRef.current;\n    }, [forwardedRef]);\n    return ensuredRef;\n}\nexport function ensuredForwardRef(Component) {\n    return forwardRef(function (props, ref) {\n        var ensuredRef = useEnsuredForwardedRef(ref);\n        return Component(props, ensuredRef);\n    });\n}\n"],"names":["_extends","module","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","arr","Array","isArray","Symbol","iterator","toString","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","err","TypeError","arrayWithHoles","iterableToArrayLimit","nonIterableRest","excluded","sourceKeys","keys","indexOf","objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","global","_processKeys","convert","obj","options","_isObject","_isDate","_isRegExp","_isBoolean","_isFunction","output","l","_isArray","camelize","string","_isNumerical","replace","match","chr","toUpperCase","substr","toLowerCase","pascalize","camelized","decamelize","separator","split","join","separateWords","_processor","callback","process","humps","depascalize","camelizeKeys","object","decamelizeKeys","pascalizeKeys","depascalizeKeys","exports","ShadowRootContext","createContext","useShadowRoot","useContext","Noop","children","ShadowContent","root","createPortal","propTypes","PropTypes","isRequired","node","defaultProps","tags","Map","createTag","ShadowRoot","forwardRef","ref","forwardedRef","ensuredRef","mode","delegatesFocus","styleSheets","props","useRef","current","useEffect","useState","setRoot","Wrapper","styled","require","Error","StyleSheetManager","getStyleWrapper","attachShadow","adoptedStyleSheets","error","name","React","tag","Provider","oneOf","bool","arrayOf","instanceOf","CSSStyleSheet","createProxy","Proxy","get","_","has","set"],"mappings":"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"}